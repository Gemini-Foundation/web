---
import { getCollection } from "astro:content"
import PageLayout from "@layouts/PageLayout.astro"
import ArrowCard from "@components/ArrowCard"
import StackCard from "@components/StackCard.astro"
import { SITE, SOCIALS } from "@consts"
import TwinklingStars from "@components/TwinklingStars.astro"
import MeteorShower from "@components/MeteorShower.astro"

const posts = (await getCollection("blog"))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0,3)

const projects = (await getCollection("projects"))
  .filter(project => !project.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0,3)

const stack = [
  { 
    text: "Astro", 
    icon: "astro", 
    href: "https://astro.build" 
  },
  { 
    text: "Javascript", 
    icon: "javascript", 
    href: "https://www.javascript.com" 
  },
  { 
    text: "Typescript", 
    icon: "typescript", 
    href: "https://www.typescriptlang.org" 
  },
  { 
    text: "Tailwind", 
    icon: "tailwind", 
    href: "https://tailwindcss.com" 
  },
]
---

<PageLayout title="Home" description={SITE.DESCRIPTION}>

  <!-- Light Mode: Particles -->
  <div class='absolute inset-0 block dark:hidden'>
    <div id='particles1' class='fixed inset-0'></div>
    <div id='particles2' class='fixed inset-0'></div>
    <div id='particles3' class='fixed inset-0'></div>
  </div>

  <!-- Dark Theme: Stars -->
  <div class='absolute inset-0 bg-black hidden dark:block'>
    <div id='stars1' class='fixed inset-0'></div>
    <div id='stars2' class='fixed inset-0'></div>
    <div id='stars3' class='fixed inset-0'></div>
  </div>

  <!-- Dark Theme: Twinkling Stars / Metors -->
  <div id="galaxy" class="fixed inset-0">
    <div class="hidden dark:block">
      <TwinklingStars/>
      <MeteorShower/>
    </div>
  </div>

  <script is:inline src="/js/bg.js"></script>
  
  <!-- HERO -->
  <section class="relative h-screen w-full bg-light-bg-primary font-serif">
    <div id="planetcont" class='animate absolute inset-0 top-1/4 overflow-hidden'>
      <div id="crescent" class='absolute top-0 left-1/2 -translate-x-1/2 w-[250vw] min-h-[100vh] aspect-square rounded-full p-[1px] bg-gradient-to-b from-light-primary/25 from-0% to-transparent to-5%'>
        <div id="planet" class='w-full h-full bg-light-bg-primary rounded-full p-[1px] overflow-hidden flex justify-center'>
          <div id="blur" class='w-full h-20 rounded-full bg-light-primary/10 blur-3xl'/>
        </div>
      </div>
    </div>
    <div class="animate absolute h-full w-full flex items-center justify-center">
      <div class='relative w-full h-full flex items-center justify-center'>
        <div class='p-5 text-center'>
          <p class='animated text-lg md:text-xl lg:text-2xl font-medium text-light-text-secondary'>
            Forschungsstiftung für
          </p>
          <p class='animated text-2xl md:text-3xl lg:text-4xl font-bold text-light-primary'>
            Digitale Zwillinge
          </p>
          <p class='animated text-sm md:text-base lg:text-lg text-light-text-secondary mt-4 max-w-2xl mx-auto'>
            Blockchain-basierte Bindungstechnologien für Wissenschaft und Gemeinwohl.<br>
            Nicht für Spekulation – sondern für strukturierte Vertrauensbeziehungen.
          </p>
          <div id="ctaButtons" class='animated flex flex-wrap gap-4 justify-center mt-8'>
            <a href='/work' class='py-3 px-6 rounded-lg text-sm md:text-base bg-light-primary text-white hover:bg-light-primary/90 transition-colors font-medium'>
              Unsere Forschung
            </a>
            <a href='/blog' class='py-3 px-6 rounded-lg text-sm md:text-base border-2 border-light-secondary text-light-secondary hover:bg-light-secondary hover:text-white transition-colors font-medium'>
              Publikationen
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="relative bg-white">
    <div class="mx-auto max-w-screen-sm p-5 space-y-24 pb-16">

      <!-- About Section -->
      <section class="animate">
        <h2 class="font-semibold text-black text-xl mb-4">Jenseits des Zentralen</h2>
        <article>
          <p>werte Mitstreiter, wir stehen heute am Rand eines unentdeckten Landes. Die digitalen Welten breiten sich vor uns aus – schier unendlich, voller Eroberungsgelüste, aber auch als eine Wüste der schlüssigen Konzepte und des Vertrauens.</p>
          <p>Wie sollen wir unsere wertvollsten Güter – unsere Daten, unsere Rechte, unsere Prozesse – in dieses neue Land entlassen, ohne dieselben bürokratischen Mauern und Kontrolltürme zu errichten, die wir aus der realen Welt kennen? Wie schaffen wir Vertrauen jenseits numerologischer Zahlenspielereien?</p>
          <p>Das neue Land mit den Konzepten des alten zu erschließen, erschließt nicht dessen Potenzial. Es ahmt nur Bestehendes als digitale Kopie nach. Ein endloses Land braucht Lösungen, die kein Vertrauen erfordern – Lösungen, die sich selbst verschränken, um glaubhaft und nachvollziehbar zu sein.</p>
          <p>Stellen Sie sich digitale Zwillinge vor, die ihre Authentizität nicht behaupten, sondern beweisen. Durch kryptographische Strukturen, die Manipulation unmöglich machen. Durch Systeme, die vollständige Transparenz bieten, ohne sensible Daten preiszugeben. Durch horizontale Vernetzung statt vertikaler Kontrolle.</p>
          <p>Die wahre Revolution liegt in der Entgrenzung von Vertrauen selbst. Wenn ein digitaler Zwilling eines Produktionsprozesses seine Integrität selbst beweist, brauchen wir keine Kontrollinstanz. Wenn dezentrale Systeme ihre Governance-Regeln in unveränderlichen Strukturen kodifizieren, brauchen wir keine zentrale Verwaltung.</p>
          <p>Wir arbeiten auf eine Zukunft hin, in der "trustless" das höchste Maß an Vertrauen darstellt. Wo Systeme so gestaltet sind, dass Betrug strukturell unmöglich wird. Wo sich Vertrauen nicht aus Autorität speist, sondern aus der Eleganz mathematischer Gewissheit.</p>
          <p>Die deutsche Forschungslandschaft kann Pionier dieser neuen Vertrauensarchitektur werden. Lassen Sie uns das unentdeckte Land nicht mit den Werkzeugen der Vergangenheit besiedeln, sondern mit den Möglichkeiten der Zukunft erschließen. Die digitalen Zwillinge von morgen werden nicht überwacht werden müssen – sie werden sich selbst überwachen. Und genau darin liegt ihre Macht.</p>
          <p style="text-align: right; margin-top: 2rem; font-style: italic; color: #666;">Dr. Thomas Witt</p>
        </article>
      </section>

      <!-- Blog Preview Section -->
      <section class="animate">
        <div class="space-y-4">
          <div class="flex justify-between">
            <p class="font-semibold text-black">
              Aktuelle Beiträge
            </p>
            <a href="/blog" class="w-fit col-span-3 group flex gap-1 items-center underline decoration-[.5px] decoration-black/25 hover:decoration-black text-black underline-offset-2 blend">
              <span class="text-black/75 group-hover:text-black blend">
                Alle Beiträge
              </span>
            </a>
          </div>
          <ul class="space-y-4">
            {posts.map((post) => (
              <li>
                <ArrowCard entry={post} />
              </li>
            ))}
          </ul>
        </div>
      </section>

      <!-- Tech Stack Section -->
      <section class="animate">
        <div class="space-y-4">
          <p class="font-semibold text-black">
            Website erstellt mit
          </p>
          <div class="flex flex-wrap items-center gap-2 mt-5">
            {stack.map(item => (
              <StackCard 
                text={item.text}
                icon={item.icon}
                href={item.href}
              />
            ))}
          </div>
          <div>
            Performt reaktiv and zustandsbehaftet, leicht dösend, mit einem "Special Guest":
            <a href="https://www.solidjs.com/" target="_blank" class="w-fit group underline decoration-[.5px] decoration-black/25 hover:decoration-black text-black underline-offset-2 blend">
              <span class="text-black/75 group-hover:text-black blend">
                SolidJS
              </span>
            </a>
          </div>
        </div>
      </section>

      <!-- Project Preview Section -->
      <section class="animate">
        <div class="space-y-4">
          <div class="flex justify-between">
            <p class="font-semibold text-black">
              Aktuelle Projekte
            </p>
            <a href="/projects" class="w-fit col-span-3 group flex gap-1 items-center underline decoration-[.5px] decoration-black/25 hover:decoration-black text-black underline-offset-2 blend">
              <span class="text-black/75 group-hover:text-black blend">
                Alle Projekte
              </span>
            </a>
          </div>
          <ul class="space-y-4">
            {projects.map((project) => (
              <li>
                <ArrowCard entry={project} />
              </li>
            ))}
          </ul>
        </div>
      </section>

      <!-- Contact Section -->
      <section class="animate">
        <div>
          <p class="font-semibold text-black">
            Kontakt
          </p>
          <p>
            Kontaktieren Sie uns per E-Mail, meiden Sie soziale Medien.
          </p>
          <div class="grid grid-cols-4 gap-y-2 mt-4 auto-cols-min">
            {SOCIALS.map(social => (
              <div class="col-span-1 flex items-center gap-1">
                <span class="whitespace-nowrap truncate">
                  {social.NAME}
                </span>
              </div>
              <div class="col-span-3 truncate">
                <a href={social.HREF} target="_blank" class="w-fit col-span-3 group flex gap-1 items-center underline decoration-[.5px] decoration-black/25 hover:decoration-black text-black underline-offset-2 blend">
                  <span class="text-black/75 group-hover:text-black blend">
                    {social.TEXT}
                  </span>
                </a>
              </div>
            ))}
        </div>
      </section>
    </div>
  </div>
</PageLayout>
